## TypeScript コーディングルール

### 基本原則

- 型定義は interface ではなく、type を使用する
- for よりも map などの関数型メソッドを優先して使用する
- let は一切使わず、const を使用する
- 外部で使われていない場合は export しない
- 使用していない import や変数は削除
- class は一切使わない
- 関数やコンポーネントは小さく作る

### インポート・エクスポート

- ES Modules 使用時は .js 拡張子を明示してインポート
- 相対パス指定時は一貫したベースパスを使用
- デフォルトエクスポートよりも名前付きエクスポートを優先

### 型安全性

- any 型の使用を避け、適切な型定義を行う
- オプショナル型は `?:` を使用
- Union types で状態を明確に表現
- 配列アクセス時は bounds check を実装

## 一般的なコーディングプラクティス

### 関数型アプローチ

- 純粋関数を優先
- 不変データ構造を使用
- 副作用を分離
- 型安全性を確保

### ドメイン駆動設計 (DDD)

- 値オブジェクトとエンティティを区別
- 集約で整合性を保証
- リポジトリでデータアクセスを抽象化
- 境界付けられたコンテキストを意識

### テスト駆動開発 (TDD)

- Red-Green-Refactor サイクル
- テストを仕様として扱う
- 小さな単位で反復
- 継続的なリファクタリング

### 使っていないものは消す

- 使用していない変数や関数は消す
- 使用していない import は消す
- 使用していないライブラリは消す
- 不要になったファイルは消す
- 先を見越して過剰な method を先に定義しない

## ディレクトリ構成

### Package by Feature

機能単位でコードを整理し、関連するファイルをすべて同じフォルダにまとめる構造。
コンポーネント・hooks・サービス・型・テストなどを技術単位でディレクトリを分けるのではなく、機能単位でまとめることで、必要なファイルを一箇所で把握しやすくなる。
各 feature ディレクトリの内部でも package by feature の原則を適用する。
無理にディレクトリで分類する必要はなくフラットに配置すれば良い。7 個以上のファイルがある場合は、サブディレクトリを作成しても良い。
copoments, types, repositories といった技術を表すディレクトリは作らないでください. shard, utils なども原則作らない.

```
src/
  features/
    auth/
      LoginForm.tsx
      useLogin.ts
      service.ts
      types.ts
      test.ts
    user/
      UserProfile.tsx
      useUserProfile.ts
      service.ts
      types.ts
      test.ts
```

## Git プラクティス

### コミットの作成

- できるだけ小さい粒度で commit を作成する
- commit 前に、format, lint, typecheck, test を実行する
- コミットメッセージは「なぜ」に焦点を当てる
- 明確で簡潔な言葉を使用
- 変更の目的を正確に反映

### コミットメッセージの例

```bash
# 新機能の追加
feat: よるエラー処理の導入

# 既存機能の改善
update: キャッシュ機能のパフォーマンス改善

# バグ修正
fix: 認証トークンの期限切れ処理を修正

# リファクタリング
refactor: Adapterパターンを使用して外部依存を抽象化

# テスト追加
test: エラーケースのテストを追加

# ドキュメント更新
docs: エラー処理のベストプラクティスを追加
```

## プロジェクト固有のガイドライン

- Bun のビルトイン機能を優先的に使用
- Node.js 固有のパッケージではなく、Bun 対応または Web 標準の API を使用
- パフォーマンスを意識し、Bun の高速性を最大限活用
- ホットリロード機能 (`bun --hot`) を開発時に活用

## セキュリティ考慮事項

- 環境変数は Bun が自動で読み込むため、.env ファイルの管理に注意
- Bun.serve() 使用時は適切なルートガードを実装
- 外部入力の検証を徹底

## 重要な注意事項

- このプロジェクトで実際に作業を行う際は、必ず上記のルールに従う
- 何か実装する前に、これらのプラクティスを参照する
- コードを書いた後は、lint, typecheck, test を実行する

For more information, read the Bun API docs in `node_modules/bun-types/docs/**.md`.
